<?xml version="1.0" encoding="utf-8"?>
<VisualStudioToolFile
	Name="ACF Rules"
	Version="8,00"
	>
	<Rules>
		<CustomBuildRule
			Name="Arxc"
			DisplayName="ARX Compiler"
			CommandLine="$(ACFDIR)\Bin\$(ConfigurationName)VC8\Arxc.exe $(InputPath) -o $(InputDir)Generated\C$(InputName).cpp [AllOptions] [AdditionalOptions]"
			Outputs="$(InputDir)Generated\C$(InputName).cpp"
			AdditionalDependencies="$(ACFDIR)\Bin\$(ConfigurationName)VC8\Arxc.exe"
			FileExtensions="*.arx"
			ExecutionDescription="Compiling ACF Registry File..."
			>
			<Properties>
				<StringProperty
					Name="ConfigFile"
					DisplayName="Packages Configuration File"
					Category="Environment"
					Description="ACF Packages Configuration File"
					Switch="-config [value]"
					Delimited="true"
					Inheritable="true"
				/>
			</Properties>
		</CustomBuildRule>
		<CustomBuildRule
			Name="DeployCopy"
			DisplayName="Deploy copy files"
			CommandLine="copy /Y [$InputDir]\$(InputName) + $(ACFDIR)\Config\VC8\empty [$OutputDir]\"
			Outputs="[$OutputDir]\$(InputName)"
			AdditionalDependencies="[$InputDir]\$(InputName)"
			FileExtensions="*.copy"
			ExecutionDescription="Copying file $(InputName)"
			>
			<Properties>
				<StringProperty
					Name="OutputDir"
					DisplayName="Output Directory"
					Category="Environment"
					Description="Specify output directory"
					DefaultValue="$(OutputDir)"
					Delimited="true"
					Inheritable="true"
				/>
				<StringProperty
					Name="InputDir"
					DisplayName="Input Directory"
					Category="Environment"
					Description="Optional input directory, if *.copy file should be used as dummy only"
					DefaultValue="$(InputDir)"
					Delimited="true"
					Inheritable="true"
				/>
			</Properties>
		</CustomBuildRule>
		<CustomBuildRule
			Name="SubVersionTransform"
			DisplayName="SubVersion Transformation"
			CommandLine="SubWCRev [$SubVersionPath] $(InputPath) [$OutputDir]\$(InputName)"
			Outputs="[$OutputDir]\$(InputName)"
			FileExtensions="*.xtrsvn"
			ExecutionDescription="Transforming with SubVersion $(InputName)..."
			ShowOnlyRuleProperties="false"
			>
			<Properties>
				<StringProperty
					Name="OutputDir"
					DisplayName="Output Directory"
					Category="Environment"
					Description="Specify output directory were transformed files will be placed"
					DefaultValue="$(OutputDir)"
					Delimited="true"
					Inheritable="true"
				/>
				<StringProperty
					Name="SubVersionPath"
					DisplayName="SubVersion Directory"
					Category="Environment"
					Description="Path of SubVersion directory will be used"
					DefaultValue="$(InputDir)"
					Delimited="true"
					Inheritable="true"
				/>
			</Properties>
		</CustomBuildRule>
		<CustomBuildRule
			Name="FileConvertCopy"
			DisplayName="ACF file convertion copy"
			CommandLine="$(ACFDIR)\Bin\$(ConfigurationName)VC8\Acf.exe [$RegistryFile] -config [$ConfigFile] -input $(InputPath) -o [$OutputDir]\$(InputName)"
			Outputs="[$OutputDir]\$(InputName)"
			AdditionalDependencies="$(ACFDIR)\Bin\$(ConfigurationName)VC8\Acf.exe;[$RegistryFile];[$ConfigFile];"
			FileExtensions="*.xtracf"
			ExecutionDescription="Converting File With ACF transformation..."
			>
			<Properties>
				<StringProperty
					Name="RegistryFile"
					DisplayName="Application Registry File"
					Category="Environment"
					Description="ACF registry file with exported interface ibase::IApplication"
					DefaultValue="$(ACFDIR)\Partitura\AcfVoce.arp\FileSubstitCopyApp.arx"
					Delimited="true"
					Inheritable="true"
				/>
				<StringProperty
					Name="ConfigFile"
					DisplayName="Packages Configuration File"
					Category="Environment"
					Description="ACF packages configuration file"
					DefaultValue="$(ACFDIR)\Config\AcfBaseOnly.xpc"
					Delimited="true"
					Inheritable="true"
				/>
				<StringProperty
					Name="OutputDir"
					DisplayName="Output Directory"
					Category="Environment"
					Description="Specify output directory were transformed files will be placed"
					DefaultValue="$(OutputDir)"
					Delimited="true"
					Inheritable="true"
				/>
			</Properties>
		</CustomBuildRule>
	</Rules>
</VisualStudioToolFile>
